# Strategiz API - Base Application Properties
# Profile-specific configs are in application-dev.properties and application-prod.properties

# Spring Boot configuration
spring.application.name=strategiz-api
server.port=${PORT:8080}

# Jackson configuration
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.default-property-inclusion=non_null

# Multipart file upload (for profile images)
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=10MB

# Logging
logging.level.root=INFO
logging.level.io.strategiz=INFO

# Bean definition overriding (required for RestTemplate bean conflicts)
spring.main.allow-bean-definition-overriding=true

# Firebase configuration
spring.cloud.gcp.project-id=strategiz-io
spring.cloud.gcp.firestore.enabled=false
spring.cloud.gcp.enabled=false
spring.cloud.gcp.core.enabled=false
firebase.database.url=https://strategiz-io-default-rtdb.firebaseio.com
firebase.storage.bucket=strategiz-io.firebasestorage.app

# Actuator - expose health check and metrics
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized

# Metrics - Enable percentile histograms for latency tracking
management.metrics.distribution.percentiles-histogram.http.server.requests=true
management.metrics.distribution.percentiles.http.server.requests=0.5,0.95,0.99
management.metrics.distribution.slo.http.server.requests=50ms,100ms,200ms,500ms,1s,2s,5s
management.metrics.tags.application=${spring.application.name}

# TimescaleDB (disabled by default for local development)
# Enable in application-dev.properties or application-prod.properties
strategiz.timescale.enabled=false

# ClickHouse (enabled by default - credentials loaded from Vault)
strategiz.clickhouse.enabled=true
strategiz.clickhouse.ssl=true
strategiz.clickhouse.pool.max-pool-size=5
strategiz.clickhouse.pool.min-idle=1
strategiz.clickhouse.pool.connection-timeout-ms=10000
strategiz.clickhouse.pool.idle-timeout-ms=300000

