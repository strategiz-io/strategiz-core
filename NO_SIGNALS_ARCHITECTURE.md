# No-Signals Detection - Architecture Diagrams

## 1. High-Level System Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER ACTIONS                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ 1. Clicks "Backtest Strategy"
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FRONTEND (React/TypeScript)                   â”‚
â”‚                                                                 â”‚
â”‚  UnifiedStrategyBuilder.tsx                                     â”‚
â”‚  â”œâ”€ Sends POST /v1/strategies/execute-code                      â”‚
â”‚  â””â”€ Body: { code, symbol, timeframe, period }                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ 2. HTTP POST Request
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   BACKEND (Spring Boot)                         â”‚
â”‚                                                                 â”‚
â”‚  ExecuteStrategyController                                      â”‚
â”‚  â”œâ”€ Validates request                                           â”‚
â”‚  â”œâ”€ Checks authentication                                       â”‚
â”‚  â””â”€ Delegates to service layer                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ 3. Service call
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              StrategyExecutionService (Service Layer)           â”‚
â”‚                                                                 â”‚
â”‚  executeStrategy(code, symbol, timeframe, period)               â”‚
â”‚  â”œâ”€ Fetches market data (DB query)                             â”‚
â”‚  â”œâ”€ Calls gRPC Python executor                                 â”‚
â”‚  â”œâ”€ Maps gRPC response to REST DTO                             â”‚
â”‚  â””â”€ Checks: buyCount == 0 && sellCount == 0?                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                     â”‚
         NO SIGNALS            HAS SIGNALS
                â”‚                     â”‚
                â†“                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ†• TRIGGER AI ANALYSIS    â”‚  â”‚ Return ExecuteStrategyResponseâ”‚
â”‚                           â”‚  â”‚ - signals                   â”‚
â”‚ NoSignalAnalysisBusiness  â”‚  â”‚ - performance               â”‚
â”‚  analyzeNoSignals()       â”‚  â”‚ - indicators                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ 4. Business logic
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          NoSignalAnalysisBusiness (Business Layer)              â”‚
â”‚                                                                 â”‚
â”‚  Step 1: Get Market Context                                     â”‚
â”‚  â”œâ”€ Query HistoricalInsightsService (Alpha Mode)               â”‚
â”‚  â”œâ”€ Volatility regime, trend direction                         â”‚
â”‚  â””â”€ Returns: MarketContext                                      â”‚
â”‚                                                                 â”‚
â”‚  Step 2: Analyze Strategy Code                                 â”‚
â”‚  â”œâ”€ Parse Python code with regex                               â”‚
â”‚  â”œâ”€ Detect entry/exit rules, indicators, conditions            â”‚
â”‚  â””â”€ Returns: StrategyDiagnostic                                 â”‚
â”‚                                                                 â”‚
â”‚  Step 3: Generate AI Suggestions                               â”‚
â”‚  â”œâ”€ Build prompt with code + context + diagnostic              â”‚
â”‚  â”œâ”€ Call OpenAI GPT-4o                                          â”‚
â”‚  â”œâ”€ Parse JSON response                                         â”‚
â”‚  â””â”€ Returns: List<Suggestion>                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ 5. Return analysis
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              StrategyExecutionService (Service Layer)           â”‚
â”‚                                                                 â”‚
â”‚  dto.setNoSignalAnalysis(analysis)                              â”‚
â”‚  return dto;                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ 6. HTTP Response
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FRONTEND (React/TypeScript)                   â”‚
â”‚                                                                 â”‚
â”‚  BacktestResults.tsx                                            â”‚
â”‚  â”œâ”€ Check: results.buyCount === 0?                             â”‚
â”‚  â”œâ”€ Yes: Render NoSignalsWarning component                     â”‚
â”‚  â””â”€ No: Render charts & performance metrics                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ 7. Display to user
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NoSignalsWarning Component                   â”‚
â”‚                                                                 â”‚
â”‚  âš ï¸ No Signals Generated                                        â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“Š Market Context                                              â”‚
â”‚  - Trend: Bullish                                               â”‚
â”‚  - Volatility: Moderate (22%)                                   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ’¡ AI Suggestions (3)                                          â”‚
â”‚  1. [High] Conditions too strict â†’ Relax RSI < 30              â”‚
â”‚  2. [Medium] Indicator mismatch â†’ Use 50-day SMA               â”‚
â”‚  3. [Low] Add volume filter                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Module Dependency Graph

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  application-api (Main App)                  â”‚
â”‚                                                              â”‚
â”‚  Spring Boot Application                                    â”‚
â”‚  - Serves all REST endpoints                                â”‚
â”‚  - Dependency injection container                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ depends on
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    service-labs (REST API)                   â”‚
â”‚                                                              â”‚
â”‚  - ExecuteStrategyController                                â”‚
â”‚  - ExecuteStrategyRequest/Response DTOs                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ depends on
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           service-labs/StrategyExecutionService              â”‚
â”‚                                                              â”‚
â”‚  - Lightweight orchestration                                â”‚
â”‚  - Fetches market data                                      â”‚
â”‚  - Calls gRPC executor                                      â”‚
â”‚  - ğŸ†• Calls NoSignalAnalysisBusiness                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                         â”‚
             â”‚ depends on              â”‚ depends on
             â†“                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ client-execution       â”‚  â”‚ ğŸ†• business-nosignal-analysis    â”‚
â”‚                        â”‚  â”‚                                  â”‚
â”‚ - ExecutionServiceClientâ”‚  â”‚ - NoSignalAnalysisBusiness      â”‚
â”‚ - gRPC to Python       â”‚  â”‚ - Model classes                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚ depends on
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â†“              â†“              â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚business-     â”‚  â”‚business-     â”‚  â”‚data-         â”‚
              â”‚ai-chat       â”‚  â”‚historical-   â”‚  â”‚marketdata    â”‚
              â”‚              â”‚  â”‚insights      â”‚  â”‚              â”‚
              â”‚-OpenAIServiceâ”‚  â”‚-Alpha Mode   â”‚  â”‚-Repository   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Input   â”‚
â”‚              â”‚
â”‚ - Python codeâ”‚
â”‚ - Symbol     â”‚
â”‚ - Timeframe  â”‚
â”‚ - Period     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Strategy Execution                       â”‚
â”‚                                                             â”‚
â”‚  Market Data â†’ Python Executor â†’ Signals & Performance     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
  Are there signals?
       â”‚
       â”œâ”€â”€â”€ YES â”€â”€â”€â†’ Display performance metrics & charts
       â”‚
       â””â”€â”€â”€ NO â”€â”€â”€â”€â†’ Trigger Analysis
                          â”‚
                          â†“
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   Parallel Data Collection       â”‚
           â”‚                                  â”‚
           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
           â”‚  â”‚ Alpha Mode Insights        â”‚ â”‚
           â”‚  â”‚ - Volatility regime        â”‚ â”‚
           â”‚  â”‚ - Trend direction          â”‚ â”‚
           â”‚  â”‚ - Market condition         â”‚ â”‚
           â”‚  â”‚ - Recommended indicators   â”‚ â”‚
           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
           â”‚                                  â”‚
           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
           â”‚  â”‚ Code Analysis              â”‚ â”‚
           â”‚  â”‚ - Entry rules?             â”‚ â”‚
           â”‚  â”‚ - Exit rules?              â”‚ â”‚
           â”‚  â”‚ - Indicators used          â”‚ â”‚
           â”‚  â”‚ - Condition count          â”‚ â”‚
           â”‚  â”‚ - Logic complexity         â”‚ â”‚
           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â†“
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   AI Prompt Construction         â”‚
           â”‚                                  â”‚
           â”‚  Combine:                        â”‚
           â”‚  - Strategy code                 â”‚
           â”‚  - Market context                â”‚
           â”‚  - Code diagnostic               â”‚
           â”‚  - Requested output format       â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â†“
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   OpenAI API Call (GPT-4o)       â”‚
           â”‚                                  â”‚
           â”‚  Input: 1500 tokens              â”‚
           â”‚  Output: 500 tokens (JSON)       â”‚
           â”‚  Timeout: 5 seconds              â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â†“
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   Parse AI Response              â”‚
           â”‚                                  â”‚
           â”‚  Extract:                        â”‚
           â”‚  - Issue descriptions            â”‚
           â”‚  - Recommendations               â”‚
           â”‚  - Code examples                 â”‚
           â”‚  - Priority levels               â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â†“
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   NoSignalAnalysisResult         â”‚
           â”‚                                  â”‚
           â”‚  {                               â”‚
           â”‚    marketContext: {...},         â”‚
           â”‚    diagnostic: {...},            â”‚
           â”‚    suggestions: [...]            â”‚
           â”‚  }                               â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â†“
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   Frontend Rendering             â”‚
           â”‚                                  â”‚
           â”‚  NoSignalsWarning Component      â”‚
           â”‚  - Market context section        â”‚
           â”‚  - Suggestions accordion         â”‚
           â”‚  - Diagnostic details            â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Class Diagram (Backend)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ExecuteStrategyController                      â”‚
â”‚                                                             â”‚
â”‚  + executeCode(request): ResponseEntity<Response>           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ uses
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              StrategyExecutionService                       â”‚
â”‚                                                             â”‚
â”‚  - executionServiceClient: ExecutionServiceClient           â”‚
â”‚  - noSignalAnalysisBusiness: NoSignalAnalysisBusiness ğŸ†•   â”‚
â”‚  - marketDataRepository: MarketDataRepository               â”‚
â”‚                                                             â”‚
â”‚  + executeStrategy(...): ExecuteStrategyResponse            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ uses
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ğŸ†• NoSignalAnalysisBusiness                         â”‚
â”‚                                                             â”‚
â”‚  - openAIService: OpenAIService                             â”‚
â”‚  - historicalInsightsService: HistoricalInsightsService     â”‚
â”‚  - marketDataRepository: MarketDataRepository               â”‚
â”‚                                                             â”‚
â”‚  + analyzeNoSignals(                                        â”‚
â”‚      code: String,                                          â”‚
â”‚      symbol: String,                                        â”‚
â”‚      timeframe: String,                                     â”‚
â”‚      period: String,                                        â”‚
â”‚      result: ExecutionResult                                â”‚
â”‚    ): NoSignalAnalysisResult                                â”‚
â”‚                                                             â”‚
â”‚  - getMarketContext(symbol, period): MarketContext          â”‚
â”‚  - analyzeStrategyCode(code): StrategyDiagnostic            â”‚
â”‚  - generateAISuggestions(...): List<Suggestion>             â”‚
â”‚  - buildPrompt(...): String                                 â”‚
â”‚  - parseAIResponse(response): List<Suggestion>              â”‚
â”‚  - getFallbackSuggestions(): List<Suggestion>               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ returns
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ğŸ†• NoSignalAnalysisResult                           â”‚
â”‚                                                             â”‚
â”‚  - symbol: String                                           â”‚
â”‚  - timeframe: String                                        â”‚
â”‚  - period: String                                           â”‚
â”‚  - marketContext: MarketContext                             â”‚
â”‚  - diagnostic: StrategyDiagnostic                           â”‚
â”‚  - suggestions: List<Suggestion>                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ğŸ†• MarketContext                                    â”‚
â”‚                                                             â”‚
â”‚  - volatilityRegime: String                                 â”‚
â”‚  - trendDirection: String                                   â”‚
â”‚  - averageVolatility: Double                                â”‚
â”‚  - recommendedIndicators: List<String>                      â”‚
â”‚  - marketCondition: String                                  â”‚
â”‚                                                             â”‚
â”‚  + createDefault(): MarketContext                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ğŸ†• StrategyDiagnostic                               â”‚
â”‚                                                             â”‚
â”‚  - hasEntryRules: boolean                                   â”‚
â”‚  - hasExitRules: boolean                                    â”‚
â”‚  - hasIndicators: boolean                                   â”‚
â”‚  - hasComplexConditions: boolean                            â”‚
â”‚  - conditionCount: int                                      â”‚
â”‚  - crossoverDetected: boolean                               â”‚
â”‚  - thresholdComparisons: boolean                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ğŸ†• Suggestion                                        â”‚
â”‚                                                             â”‚
â”‚  - issue: String                                            â”‚
â”‚  - recommendation: String                                   â”‚
â”‚  - example: String                                          â”‚
â”‚  - priority: String  ("high" | "medium" | "low")            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Component Hierarchy (Frontend)

```
UnifiedStrategyBuilder
â”‚
â”œâ”€ Tabs
â”‚  â”œâ”€ Visual Editor
â”‚  â””â”€ Algorithm Editor (Python code)
â”‚
â”œâ”€ Configuration Panel
â”‚  â”œâ”€ Symbol selector
â”‚  â”œâ”€ Timeframe selector
â”‚  â””â”€ Period selector
â”‚
â”œâ”€ Action Buttons
â”‚  â”œâ”€ Generate Strategy (AI)
â”‚  â”œâ”€ Save Strategy
â”‚  â””â”€ Backtest Strategy  â† TRIGGERS EXECUTION
â”‚
â””â”€ Results Panel
   â”‚
   â””â”€ BacktestResults
      â”‚
      â”œâ”€ Check: Has signals?
      â”‚
      â”œâ”€ YES: Show Charts & Metrics
      â”‚  â”œâ”€ EquityCurveChart
      â”‚  â”œâ”€ SummaryTab
      â”‚  â”‚  â”œâ”€ Performance metrics
      â”‚  â”‚  â”œâ”€ Risk metrics
      â”‚  â”‚  â””â”€ Buy & Hold comparison
      â”‚  â””â”€ TradeDetailsTab
      â”‚     â””â”€ Trade list with P&L
      â”‚
      â””â”€ NO: Show NoSignalsWarning ğŸ†•
         â”‚
         â”œâ”€ Alert Banner
         â”‚  â””â”€ "No Signals Generated" message
         â”‚
         â”œâ”€ Market Context Accordion
         â”‚  â”œâ”€ Trend direction chip
         â”‚  â”œâ”€ Volatility regime chip
         â”‚  â””â”€ Market condition description
         â”‚
         â”œâ”€ AI Suggestions Accordion (expanded by default)
         â”‚  â””â”€ List of suggestions
         â”‚     â””â”€ For each suggestion:
         â”‚        â”œâ”€ Priority badge
         â”‚        â”œâ”€ Issue title
         â”‚        â”œâ”€ Recommendation text
         â”‚        â””â”€ Code example (monospace box)
         â”‚
         â””â”€ Strategy Diagnostic Accordion
            â””â”€ Checklist
               â”œâ”€ Has entry rules?
               â”œâ”€ Has exit rules?
               â”œâ”€ Uses indicators?
               â””â”€ Condition count
```

---

## 6. Sequence Diagram

```
User         Frontend        Controller      Service         Business        OpenAI
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚ Click         â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚ "Backtest"    â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚ POST          â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚ /execute-code â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚ execute()    â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚ Fetch        â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚ market data  â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚â”€â”€â”€â”€â”€â”€â”       â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚<â”€â”€â”€â”€â”€â”˜       â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚ Call gRPC    â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚ executor     â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚â”€â”€â”€â”€â”€â”€â”       â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚<â”€â”€â”€â”€â”€â”˜       â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚ Check        â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚ signals==0?  â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚â”€â”€â”€â”€â”€â”€â”       â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚<â”€â”€â”€â”€â”€â”˜       â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚   YES        â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚ analyze()    â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚ Get Alpha    â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚ Mode insightsâ”‚
 â”‚               â”‚               â”‚              â”‚              â”‚â”€â”€â”€â”€â”€â”€â”       â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚<â”€â”€â”€â”€â”€â”˜       â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚ Parse        â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚ code         â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚â”€â”€â”€â”€â”€â”€â”       â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚<â”€â”€â”€â”€â”€â”˜       â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚ Generate     â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚ prompt       â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚â”€â”€â”€â”€â”€â”€â”       â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚<â”€â”€â”€â”€â”€â”˜       â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚ Call API     â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚ AI
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚ Processing
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚ (2-5s)
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚ JSON Responseâ”‚
 â”‚               â”‚               â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚ Parse        â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚ suggestions  â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚â”€â”€â”€â”€â”€â”€â”       â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚<â”€â”€â”€â”€â”€â”˜       â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚ Analysis     â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚ Result       â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚ Response     â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚ with         â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚ analysis     â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚ 200 OK        â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚ {analysis...} â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚ Render        â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚ NoSignals     â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚ Warning       â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚              â”‚              â”‚              â”‚
 â”‚               â”‚               â”‚              â”‚              â”‚              â”‚
```

---

## 7. Error Handling Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         NoSignalAnalysisBusiness.analyzeNoSignals()    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
            Try: Get Market Context
                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ SUCCESS                   â”‚ FAILURE
         â†“                           â†“
   Use Alpha Mode insights      Use fallback context
   - Volatility regime          - "Moderate" volatility
   - Trend direction            - "Mixed" trend
   - Market condition           - "Normal conditions"
         â”‚                           â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
            Try: Analyze Code
                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ SUCCESS                   â”‚ FAILURE
         â†“                           â†“
   Parse indicators            Mark all as false
   Count conditions            Log warning
         â”‚                           â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
            Try: Generate AI Suggestions
                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ SUCCESS                   â”‚ FAILURE
         â†“                           â†“
   Parse JSON response         Use fallback suggestions
   Return suggestions          - "Conditions too strict"
   Priority-sorted             - "Check indicators"
         â”‚                     - "Market alignment"
         â”‚                           â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
            Always: Return NoSignalAnalysisResult
            (Even if all steps failed, user gets feedback)
                       â”‚
                       â†“
            Frontend: Render NoSignalsWarning
            (Never shows blank screen!)
```

**Key Principle:** Graceful degradation at every step. User ALWAYS gets feedback.

---

## 8. Performance Budget

```
Total Response Time Target: < 6 seconds (95th percentile)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Component Breakdown:                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                              â”‚
â”‚ 1. Market Data Query                  50ms  â”‚
â”‚    â””â”€ Single DB query (ClickHouse)          â”‚
â”‚                                              â”‚
â”‚ 2. Python Strategy Execution         500ms  â”‚
â”‚    â””â”€ gRPC call + Python runtime             â”‚
â”‚                                              â”‚
â”‚ 3. Alpha Mode Insights (cached)       10ms  â”‚
â”‚    â””â”€ Read from cache                        â”‚
â”‚                                              â”‚
â”‚ 4. Code Analysis (regex)               5ms  â”‚
â”‚    â””â”€ Pattern matching                       â”‚
â”‚                                              â”‚
â”‚ 5. AI Suggestion Generation         3000ms  â”‚
â”‚    â”œâ”€ Build prompt             10ms          â”‚
â”‚    â”œâ”€ OpenAI API call       2500ms          â”‚
â”‚    â””â”€ Parse response          10ms          â”‚
â”‚                                              â”‚
â”‚ 6. Response Marshalling              50ms  â”‚
â”‚    â””â”€ JSON serialization                     â”‚
â”‚                                              â”‚
â”‚ 7. Network Latency                  100ms  â”‚
â”‚    â””â”€ Frontend â†” Backend                     â”‚
â”‚                                              â”‚
â”‚ 8. Frontend Rendering                50ms  â”‚
â”‚    â””â”€ React component render                 â”‚
â”‚                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TOTAL:                            3,765ms  â”‚
â”‚ BUFFER (95th percentile):         2,235ms  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TARGET:                           6,000ms  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Optimization Strategies:
- Cache Alpha Mode insights (7 days TTL)
- Async AI call with timeout (5s)
- Connection pooling for OpenAI
- CDN for frontend assets
```

---

## 9. Security & Authorization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Authorization Flow                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â†“
         Does user have valid JWT token?
                           â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ NO                  â”‚ YES
                â†“                     â†“
         Return 401             Extract userId
         Unauthorized           from token
                                      â”‚
                                      â†“
                        Is user subscription active?
                                      â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ NO                        â”‚ YES
                        â†“                           â†“
                 Check quota:             Full access to
                 - 5 backtests/day        AI analysis
                 - Basic analysis only
                        â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â†“
                        Rate limit check:
                        - Max 10 AI analyses/hour
                        - Per user, per IP
                                      â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ EXCEEDED                  â”‚ WITHIN LIMIT
                        â†“                           â†“
                 Return 429                  Proceed with
                 Too Many Requests           analysis
```

**API Key Security:**
- OpenAI API key stored in HashiCorp Vault
- Never exposed to frontend
- Rotated monthly
- Rate limited per user

**Data Privacy:**
- Strategy code never logged (PII)
- Analysis results not stored (unless user saves)
- OpenAI data retention: 30 days (per OpenAI policy)

---

## 10. Monitoring & Observability

```
Metrics to Track:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Performance Metrics                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - analysis_duration_ms (p50, p95, p99)                      â”‚
â”‚ - alpha_mode_query_duration_ms                              â”‚
â”‚ - openai_api_duration_ms                                    â”‚
â”‚ - total_backtest_duration_ms                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Business Metrics                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - no_signal_analysis_triggered_count                        â”‚
â”‚ - ai_suggestion_generated_count                             â”‚
â”‚ - fallback_suggestion_used_count                            â”‚
â”‚ - user_applied_suggestion_count (future)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Error Metrics                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - alpha_mode_failure_count                                  â”‚
â”‚ - openai_timeout_count                                      â”‚
â”‚ - openai_error_count (by error type)                        â”‚
â”‚ - parse_error_count                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Cost Metrics                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - openai_tokens_consumed (input + output)                   â”‚
â”‚ - openai_cost_usd (estimated)                               â”‚
â”‚ - cost_per_user_per_month                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Logging Strategy:

[INFO] No signal analysis triggered: userId={}, symbol={}, timeframe={}
[DEBUG] Market context: volatility={}, trend={}, condition={}
[DEBUG] Code diagnostic: entryRules={}, exitRules={}, conditionCount={}
[INFO] AI suggestions generated: count={}, duration={}ms
[WARN] OpenAI API timeout, using fallback suggestions
[ERROR] Failed to parse AI response: {}
```

---

This architecture ensures:
âœ… Clear separation of concerns
âœ… Graceful degradation at every step
âœ… Never shows blank screen to users
âœ… Performance within acceptable limits
âœ… Security & rate limiting
âœ… Full observability
