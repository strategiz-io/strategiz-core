server:
  port: ${PORT:8444}

spring:
  application:
    name: strategiz-batch
  profiles:
    active: scheduler
  autoconfigure:
    exclude:
      - com.google.cloud.spring.autoconfigure.firestore.GcpFirestoreAutoConfiguration
      - com.google.cloud.spring.autoconfigure.core.GcpContextAutoConfiguration
      - com.google.cloud.spring.autoconfigure.firestore.FirestoreTransactionManagerAutoConfiguration

# Vault configuration for secrets management
strategiz:
  vault:
    enabled: true
    address: ${STRATEGIZ_VAULT_ADDRESS:${VAULT_ADDR:http://localhost:8200}}
    cache-timeout-ms: 60000
    fail-fast: true
    secrets-path: secret

# Spring Cloud Vault Configuration (required for Spring Cloud Vault autoconfiguration)
spring.cloud.vault:
  enabled: true
  uri: ${STRATEGIZ_VAULT_ADDRESS:${VAULT_ADDR:http://localhost:8200}}
  token: ${VAULT_TOKEN:}
  authentication: TOKEN

# Alpaca batch job configuration
alpaca:
  batch:
    # Enable backfill job to load initial historical dataset
    backfill-enabled: true
    backfill-timeframe: 1Min

    # Enable incremental job to keep market data up-to-date
    incremental-enabled: true
    incremental-timeframe: 1Min
    incremental-lookback-hours: 2
    incremental-cron: "0 */5 * * * MON-FRI"  # Every 5 minutes, weekdays only

# Logging configuration
logging:
  level:
    root: INFO
    io.strategiz: DEBUG
    io.strategiz.batch: DEBUG
    io.strategiz.business: DEBUG
