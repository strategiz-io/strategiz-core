# Production Configuration for Strategiz

# Server Configuration
server.port=${PORT:8080}
# Disable SSL - Cloud Run handles TLS termination at the load balancer
server.ssl.enabled=false
# Disable custom HTTPS connector (not needed in Cloud Run)
https.enabled=false

# Security
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.same-site=None

# Custom Cookie Configuration for cross-origin AJAX with credentials
# Required for frontend at strategiz.io calling API at api.strategiz.io
app.cookie.secure=true
app.cookie.same-site=None

# Firebase Configuration (from environment variables)
firebase.database-url=${FIREBASE_DATABASE_URL:https://strategiz-io.firebaseio.com}
firebase.project-id=${FIREBASE_PROJECT_ID:strategiz-io}
firebase.service-account-key=${FIREBASE_SERVICE_ACCOUNT_KEY}

# Enable Vault in production for centralized secret management
strategiz.vault.enabled=true
strategiz.vault.address=${STRATEGIZ_VAULT_ADDRESS:${VAULT_ADDR:https://strategiz-vault-bflhiwsnmq-uc.a.run.app}}
strategiz.vault.cache-timeout-ms=60000
strategiz.vault.fail-fast=true
strategiz.vault.secrets-path=secret

# Spring Cloud Vault configuration for production
spring.cloud.vault.uri=https://strategiz-vault-bflhiwsnmq-uc.a.run.app
spring.cloud.vault.token=${VAULT_TOKEN:}
spring.cloud.vault.kv.enabled=true
spring.cloud.vault.kv.backend=secret
spring.cloud.vault.kv.default-context=strategiz

# CORS Configuration
strategiz.cors.allowed-origins=https://strategiz-io.web.app,https://strategiz-io.firebaseapp.com,https://strategiz.io

# Logging
logging.level.root=INFO
logging.level.io.strategiz=INFO
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=INFO

# Actuator endpoints for health checks
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized

# Application info
info.app.name=Strategiz Core API
info.app.version=@project.version@
info.app.environment=production

# Frontend URL configuration
application.frontend-url=https://strategiz.io
frontend.url=https://strategiz.io

# OAuth Configuration for Authentication
oauth.frontend-url=https://strategiz.io

# Passkey Configuration for Production
passkey.rpId=strategiz.io
passkey.rpName=Strategiz
passkey.challengeTimeoutMs=60000

# OAuth credentials loaded from Vault via OAuthVaultConfig
# Google OAuth Configuration (production)
oauth.providers.google.redirect-uri=https://api.strategiz.io/auth/oauth/google/signin/callback
oauth.providers.google.auth-url=https://accounts.google.com/o/oauth2/auth
oauth.providers.google.token-url=https://oauth2.googleapis.com/token
oauth.providers.google.user-info-url=https://www.googleapis.com/oauth2/v3/userinfo
oauth.providers.google.scope=email profile openid

# Facebook OAuth Configuration (production)
oauth.providers.facebook.redirect-uri=https://api.strategiz.io/auth/oauth/facebook/signin/callback
oauth.providers.facebook.auth-url=https://www.facebook.com/v12.0/dialog/oauth
oauth.providers.facebook.token-url=https://graph.facebook.com/v12.0/oauth/access_token
oauth.providers.facebook.user-info-url=https://graph.facebook.com/me
oauth.providers.facebook.scope=email,public_profile

# Coinbase OAuth Configuration (production) - for provider connections
oauth.providers.coinbase.redirect-uri=https://api.strategiz.io/v1/providers/callback/cb
oauth.providers.coinbase.auth-url=https://www.coinbase.com/oauth/authorize
oauth.providers.coinbase.scope=wallet:accounts:read,wallet:transactions:read,wallet:buys:read,wallet:sells:read

# Alpaca OAuth Configuration
oauth.providers.alpaca.redirect-uri=https://api.strategiz.io/v1/providers/callback/alpaca
oauth.providers.alpaca.auth-url=https://app.alpaca.markets/oauth/authorize
oauth.providers.alpaca.token-url=https://api.alpaca.markets/oauth/token
oauth.providers.alpaca.scope=account:read trading:write data:read

# Schwab OAuth Configuration
oauth.providers.schwab.redirect-uri=https://api.strategiz.io/v1/providers/callback/schwab

# Disable development features
spring.devtools.enabled=false
spring.jpa.show-sql=false

# Performance optimizations
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.default-property-inclusion=non_null