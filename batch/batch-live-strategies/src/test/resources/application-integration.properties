# ====================================================
# Integration Test Configuration
# ====================================================
# Run with: -Dspring.profiles.active=integration
# Requires: VAULT_TOKEN environment variable

spring.application.name=batch-live-strategies-test

# ====================================================
# Firebase Configuration (Dev)
# ====================================================
firebase.database-url=https://strategiz-io.firebaseio.com
firebase.project-id=strategiz-io
firebase.credentials.path=${FIREBASE_CREDENTIALS_PATH:}
firebase.storage.bucket=strategiz-io.firebasestorage.app

# ====================================================
# Vault Configuration (Local Dev Vault)
# ====================================================
strategiz.vault.enabled=true
strategiz.vault.address=http://localhost:8200
strategiz.vault.secrets-path=secret
strategiz.vault.fail-fast=true
strategiz.vault.fallback-to-properties=false

spring.cloud.vault.authentication=TOKEN
spring.cloud.vault.uri=http://localhost:8200
spring.cloud.vault.token=${VAULT_TOKEN:root}
spring.cloud.vault.kv.enabled=true
spring.cloud.vault.kv.backend=secret
spring.cloud.vault.kv.default-context=strategiz

# ====================================================
# TimescaleDB Configuration (from Vault)
# ====================================================
spring.datasource.hikari.maximum-pool-size=2
spring.datasource.hikari.minimum-idle=1

# ====================================================
# Live Strategies Dispatch Configuration
# ====================================================
live-strategies.dispatch.enabled=true
live-strategies.market-data.lookback-days=365
live-strategies.execution.timeout-seconds=30

# ====================================================
# gRPC Execution Service
# ====================================================
grpc.execution.host=${GRPC_EXECUTION_HOST:localhost}
grpc.execution.port=${GRPC_EXECUTION_PORT:50051}
grpc.execution.use-tls=false

# ====================================================
# Pub/Sub Configuration (Dev)
# ====================================================
spring.cloud.gcp.project-id=strategiz-io
spring.cloud.gcp.pubsub.enabled=true
pubsub.deployment.topic=deployment-processing-dev
